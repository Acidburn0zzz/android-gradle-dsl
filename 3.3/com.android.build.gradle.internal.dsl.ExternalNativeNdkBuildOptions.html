<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>ExternalNativeNdkBuildOptions - Android Plugin 3.3.0 DSL Reference</title><link type="text/css" rel="stylesheet" href="base.css"><link type="text/css" rel="stylesheet" href="docs.css"><link type="text/css" rel="stylesheet" href="dsl.css"><meta content="DocBook XSL Stylesheets V1.75.2" name="generator"><link rel="home" href="index.html" title="Android Plugin 3.3.0 DSL Reference"><link rel="up" href="index.html" title="Android Plugin 3.3.0 DSL Reference"><link rel="prev" href="com.android.build.gradle.internal.dsl.ExternalNativeCmakeOptions.html" title="ExternalNativeCmakeOptions - Android Plugin 3.3.0 DSL Reference"><link rel="next" href="com.android.build.gradle.internal.dsl.JavaCompileOptions.html" title="JavaCompileOptions - Android Plugin 3.3.0 DSL Reference"></head><body><div class="sidebar"><ul><li><a xmlns:xslthl="http://xslthl.sf.net" href="index.html" title="Android Plugin 3.3.0 DSL Reference">Home</a></li><li class="sidebarHeading selected">ExternalNativeNdkBuildOptions</li><ul class="sections"><li><a xmlns:xslthl="http://xslthl.sf.net" href="com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions.html#N11F02" title="Properties">Properties</a></li></ul><li class="sidebarHeading">Extension types</li><li><a class="link" href="com.android.build.gradle.AppExtension.html"><code class="literal">AppExtension</code></a></li><li><a class="link" href="com.android.build.gradle.LibraryExtension.html"><code class="literal">LibraryExtension</code></a></li><li><a class="link" href="com.android.build.gradle.TestExtension.html"><code class="literal">TestExtension</code></a></li><li><a class="link" href="com.android.build.gradle.FeatureExtension.html"><code class="literal">FeatureExtension</code></a></li><li class="sidebarHeading">Configuration blocks</li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:aaptOptions(org.gradle.api.Action)"><code class="literal">aaptOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:adbOptions(org.gradle.api.Action)"><code class="literal">adbOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:buildTypes(org.gradle.api.Action)"><code class="literal">buildTypes { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:compileOptions(org.gradle.api.Action)"><code class="literal">compileOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:dataBinding(org.gradle.api.Action)"><code class="literal">dataBinding { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:defaultConfig(org.gradle.api.Action)"><code class="literal">defaultConfig { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:dexOptions(org.gradle.api.Action)"><code class="literal">dexOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:externalNativeBuild(org.gradle.api.Action)"><code class="literal">externalNativeBuild { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:jacoco(org.gradle.api.Action)"><code class="literal">jacoco { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:lintOptions(org.gradle.api.Action)"><code class="literal">lintOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:packagingOptions(org.gradle.api.Action)"><code class="literal">packagingOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:productFlavors(org.gradle.api.Action)"><code class="literal">productFlavors { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:signingConfigs(org.gradle.api.Action)"><code class="literal">signingConfigs { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:sourceSets(org.gradle.api.Action)"><code class="literal">sourceSets { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:splits(org.gradle.api.Action)"><code class="literal">splits { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:testOptions(org.gradle.api.Action)"><code class="literal">testOptions { }</code></a></li></ul></div><div class="content"><div class="chapter"><div class="titlepage"><div><div><h1 xmlns:xslthl="http://xslthl.sf.net"><a name="com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions"></a>ExternalNativeNdkBuildOptions</h1></div></div></div><p>DSL object for per-variant ndk-build options, such as ndk-build arguments and compiler flags.

</p><p>To learn more about the ndk-build toolchain, read the official NDK documentation about <a class="ulink" href="https://developer.android.com/ndk/guides/build.html" target="_top">Building Your Project</a>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N11F02"></a>Properties</h3></div></div></div><div xmlns:xslthl="http://xslthl.sf.net" class="table"><div class="table-contents"><table id="N11F05"><thead><tr><td>Property</td><td>Description</td></tr></thead><tr><td><a class="link" href="com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions.html#com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions:abiFilters"><code class="literal">abiFilters</code></a></td><td><p>Specifies the Application Binary Interfaces (ABI) that Gradle should build outputs for. The
ABIs that Gradle packages into your APK are determined by <code class="classname">NdkOptions.abiFilter()</code>

</p></td></tr><tr><td><a class="link" href="com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions.html#com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions:arguments"><code class="literal">arguments</code></a></td><td><p>Specifies arguments for ndk-build.

</p></td></tr><tr><td><a class="link" href="com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions.html#com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions:cFlags"><code class="literal">cFlags</code></a></td><td><p>Specifies flags for the C compiler.

</p></td></tr><tr><td><a class="link" href="com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions.html#com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions:cppFlags"><code class="literal">cppFlags</code></a></td><td><p>Specifies flags for the C++ compiler.

</p></td></tr><tr><td><a class="link" href="com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions.html#com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions:targets"><code class="literal">targets</code></a></td><td><p>Specifies the library and executable targets from your ndk-build project that Gradle should
build.

</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N11F3E"></a>Methods</h3></div></div></div><p>No methods</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N11F43"></a>Script blocks</h3></div></div></div><p>No script blocks</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N11F48"></a>Property details</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="signature"><a name="com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions:abiFilters"></a><code class="classname"><a class="ulink" href="http://download.oracle.com/javase/7/docs/api/java/util/Set.html" target="_top"><code class="classname">Set</code></a>&lt;<a class="ulink" href="http://download.oracle.com/javase/7/docs/api/java/lang/String.html" target="_top"><code class="classname">String</code></a>&gt;</code> <code class="literal">abiFilters</code></h4></div></div></div><p>Specifies the Application Binary Interfaces (ABI) that Gradle should build outputs for. The
ABIs that Gradle packages into your APK are determined by <code class="classname">NdkOptions.abiFilter()</code>

</p><p>In most cases, you need to specify ABIs using only <code class="classname">NdkOptions.abiFilter()</code> , because it tells Gradle which ABIs to both build and
package into your APK. However, if you want to control what Gradle should build,
independently of what you want it to package into your APK, configure this property with the
ABI's you want Gradle to build.

</p><p>To further reduce the size of your APK, consider <a class="ulink" href="https://developer.android.com/studio/build/configure-apk-splits.html#configure-abi-split" target="_top">configuring
multiple APKs based on ABI</a>&mdash;instead of creating one large APK with all versions of your
native libraries, Gradle creates a separate APK for each ABI you want to support and only
packages the files each ABI needs.

</p><p>By default, this property is <code class="literal">null</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="signature"><a name="com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions:arguments"></a><code class="classname"><a class="ulink" href="http://download.oracle.com/javase/7/docs/api/java/util/List.html" target="_top"><code class="classname">List</code></a>&lt;<a class="ulink" href="http://download.oracle.com/javase/7/docs/api/java/lang/String.html" target="_top"><code class="classname">String</code></a>&gt;</code> <code class="literal">arguments</code></h4></div></div></div><p>Specifies arguments for ndk-build.

</p><p>The properties you can configure are the same as those avaiable in your <a class="ulink" href="https://developer.android.com/ndk/guides/android_mk.html" target="_top">Android.mk</a> and <a class="ulink" href="https://developer.android.com/ndk/guides/application_mk.html" target="_top">Application.mk</a>
scripts. The following sample specifies the <code class="literal">Application.mk</code> for the ndk-build
project:

</p><pre class="programlisting">android {
    <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// Similar to other properties in the defaultConfig block, you can override</span>
    <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// these properties for each product flavor you configure.</span>
    defaultConfig {
        externalNativeBuild {
            ndkBuild {
                <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// Passes an optional argument to ndk-build.</span>
                arguments <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"NDK_MODULE_PATH+=../../third_party/modules"</span>
            }
        }
    }
}</pre><p>By default, this property is <code class="literal">null</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="signature"><a name="com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions:cFlags"></a><code class="classname"><a class="ulink" href="http://download.oracle.com/javase/7/docs/api/java/util/List.html" target="_top"><code class="classname">List</code></a>&lt;<a class="ulink" href="http://download.oracle.com/javase/7/docs/api/java/lang/String.html" target="_top"><code class="classname">String</code></a>&gt;</code> <code class="literal">cFlags</code></h4></div></div></div><p>Specifies flags for the C compiler.

</p><p>The following sample enables format macro constants:

</p><pre class="programlisting">android {
    <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// Similar to other properties in the defaultConfig block, you can override</span>
    <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// these properties for each product flavor in your build configuration.</span>
    defaultConfig {
        externalNativeBuild {
            ndkBuild {
                <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// Sets an optional flag for the C compiler.</span>
                cFlags <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"-D__STDC_FORMAT_MACROS"</span>
            }
        }
    }
}</pre><p>By default, this property is <code class="literal">null</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="signature"><a name="com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions:cppFlags"></a><code class="classname"><a class="ulink" href="http://download.oracle.com/javase/7/docs/api/java/util/List.html" target="_top"><code class="classname">List</code></a>&lt;<a class="ulink" href="http://download.oracle.com/javase/7/docs/api/java/lang/String.html" target="_top"><code class="classname">String</code></a>&gt;</code> <code class="literal">cppFlags</code></h4></div></div></div><p>Specifies flags for the C++ compiler.

</p><p>The following sample enables RTTI (RunTime Type Information) support and C++ exceptions:

</p><pre class="programlisting">android {
    <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// Similar to other properties in the defaultConfig block, you can override</span>
    <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// these properties for each product flavor in your build configuration.</span>
    defaultConfig {
        externalNativeBuild {
            ndkBuild {
                <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// Sets optional flags for the C++ compiler.</span>
                cppFlags <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"-fexceptions"</span>, <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"-frtti"</span>
            }
        }
    }
}</pre><p>By default, this property is <code class="literal">null</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="signature"><a name="com.android.build.gradle.internal.dsl.ExternalNativeNdkBuildOptions:targets"></a><code class="classname"><a class="ulink" href="http://download.oracle.com/javase/7/docs/api/java/util/Set.html" target="_top"><code class="classname">Set</code></a>&lt;<a class="ulink" href="http://download.oracle.com/javase/7/docs/api/java/lang/String.html" target="_top"><code class="classname">String</code></a>&gt;</code> <code class="literal">targets</code></h4></div></div></div><p>Specifies the library and executable targets from your ndk-build project that Gradle should
build.

</p><p>For example, if your ndk-build project defines multiple libraries and executables, you can
tell Gradle to build only a subset of those outputs as follows:

</p><pre class="programlisting">android {
    <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// Similar to other properties in the defaultConfig block, you can override</span>
    <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// these properties for each product flavor in your build configuration.</span>
    defaultConfig {
        externalNativeBuild {
            ndkBuild {
                <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// The following tells Gradle to build only the "libexample-one.so" and</span>
                <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// "my-executible-two" targets from the linked ndk-build project. If you don't</span>
                <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// configure this property, Gradle builds all executables and shared object</span>
                <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// libraries that you define in your ndk-build project. However, by default,</span>
                <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// Gradle packages only the shared libraries in your APK.</span>
                targets <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"libexample-one.so"</span>,
                        <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// You need to configure this executable and its sources in your</span>
                        <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// Android.mk file like you would any other library, except you must</span>
                        <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// specify "include $(BUILD_EXECUTABLE)". Building executables from</span>
                        <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// your native sources is optional, and building native libraries to</span>
                        <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// package into your APK satisfies most project requirements.</span>
                        <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"my-executible-demo"</span>
            }
        }
    }
}</pre><p>If you don't configure this property, Gradle builds all executables and shared object
libraries that you define in your ndk-build project. However, by default, Gradle packages
only the shared libraries in your APK.</p></div></div></div><div id="copyright">
                       Except as noted, this content is licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a>.
                       For details and restrictions, see the <a href="http://developer.android.com/license.html">Content License</a>.
                   </div></div></body></html>