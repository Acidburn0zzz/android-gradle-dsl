<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>CmakeOptions - Android Plugin 3.4.0-dev DSL Reference</title><link type="text/css" rel="stylesheet" href="base.css"><link type="text/css" rel="stylesheet" href="docs.css"><link type="text/css" rel="stylesheet" href="dsl.css"><meta content="DocBook XSL Stylesheets V1.75.2" name="generator"><link rel="home" href="index.html" title="Android Plugin 3.4.0-dev DSL Reference"><link rel="up" href="index.html" title="Android Plugin 3.4.0-dev DSL Reference"><link rel="prev" href="com.android.build.gradle.internal.dsl.ExternalNativeBuild.html" title="ExternalNativeBuild - Android Plugin 3.4.0-dev DSL Reference"><link rel="next" href="com.android.build.gradle.internal.dsl.NdkBuildOptions.html" title="NdkBuildOptions - Android Plugin 3.4.0-dev DSL Reference"></head><body><div class="sidebar"><ul><li><a xmlns:xslthl="http://xslthl.sf.net" href="index.html" title="Android Plugin 3.4.0-dev DSL Reference">Home</a></li><li class="sidebarHeading selected">CmakeOptions</li><ul class="sections"><li><a xmlns:xslthl="http://xslthl.sf.net" href="com.android.build.gradle.internal.dsl.CmakeOptions.html#N12B0D" title="Properties">Properties</a></li></ul><li class="sidebarHeading">Extension types</li><li><a class="link" href="com.android.build.gradle.AppExtension.html"><code class="literal">AppExtension</code></a></li><li><a class="link" href="com.android.build.gradle.LibraryExtension.html"><code class="literal">LibraryExtension</code></a></li><li><a class="link" href="com.android.build.gradle.TestExtension.html"><code class="literal">TestExtension</code></a></li><li><a class="link" href="com.android.build.gradle.FeatureExtension.html"><code class="literal">FeatureExtension</code></a></li><li class="sidebarHeading">Configuration blocks</li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:aaptOptions(org.gradle.api.Action)"><code class="literal">aaptOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:adbOptions(org.gradle.api.Action)"><code class="literal">adbOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:buildTypes(org.gradle.api.Action)"><code class="literal">buildTypes { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:compileOptions(org.gradle.api.Action)"><code class="literal">compileOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:dataBinding(org.gradle.api.Action)"><code class="literal">dataBinding { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:defaultConfig(org.gradle.api.Action)"><code class="literal">defaultConfig { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:dexOptions(org.gradle.api.Action)"><code class="literal">dexOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:externalNativeBuild(org.gradle.api.Action)"><code class="literal">externalNativeBuild { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:jacoco(org.gradle.api.Action)"><code class="literal">jacoco { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:lintOptions(org.gradle.api.Action)"><code class="literal">lintOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:packagingOptions(org.gradle.api.Action)"><code class="literal">packagingOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:productFlavors(org.gradle.api.Action)"><code class="literal">productFlavors { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:signingConfigs(org.gradle.api.Action)"><code class="literal">signingConfigs { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:sourceSets(org.gradle.api.Action)"><code class="literal">sourceSets { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:splits(org.gradle.api.Action)"><code class="literal">splits { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:testOptions(org.gradle.api.Action)"><code class="literal">testOptions { }</code></a></li></ul></div><div class="content"><div class="chapter"><div class="titlepage"><div><div><h1 xmlns:xslthl="http://xslthl.sf.net"><a name="com.android.build.gradle.internal.dsl.CmakeOptions"></a>CmakeOptions</h1></div></div></div><p>DSL object for per-module CMake configurations, such as the path to your <code class="literal">CMakeLists.txt
</code> build script and external native build output directory.

</p><p>To include CMake projects in your Gradle build, you need to use Android Studio 2.2 and higher
with Android plugin for Gradle 2.2.0 and higher. To learn more about Android Studio's support for
external native builds, read <a class="ulink" href="https://developer.android.com/studio/projects/add-native-code.html" target="_top">Add C and C++ Code to
Your Project</a>.

</p><p>If you want to instead build your native libraries using ndk-build, see <a class="ulink" href="./com.android.build.gradle.internal.dsl.NdkBuildOptions.html" target="_top"><code class="classname">NdkBuildOptions</code></a>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N12B0D"></a>Properties</h3></div></div></div><div xmlns:xslthl="http://xslthl.sf.net" class="table"><div class="table-contents"><table id="N12B10"><thead><tr><td>Property</td><td>Description</td></tr></thead><tr><td><a class="link" href="com.android.build.gradle.internal.dsl.CmakeOptions.html#com.android.build.gradle.internal.dsl.CmakeOptions:buildStagingDirectory"><code class="literal">buildStagingDirectory</code></a></td><td><p>Specifies the path to your external native build output directory.

</p></td></tr><tr><td><a class="link" href="com.android.build.gradle.internal.dsl.CmakeOptions.html#com.android.build.gradle.internal.dsl.CmakeOptions:path"><code class="literal">path</code></a></td><td><p>Specifies the relative path to your <code class="literal">CMakeLists.txt</code> build script.

</p></td></tr><tr><td><a class="link" href="com.android.build.gradle.internal.dsl.CmakeOptions.html#com.android.build.gradle.internal.dsl.CmakeOptions:version"><code class="literal">version</code></a></td><td><p>The version of CMake that the Android plugin should use when building your CMake project.

</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N12B37"></a>Methods</h3></div></div></div><p>No methods</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N12B3C"></a>Script blocks</h3></div></div></div><p>No script blocks</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N12B41"></a>Property details</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="signature"><a name="com.android.build.gradle.internal.dsl.CmakeOptions:buildStagingDirectory"></a><a class="ulink" href="http://download.oracle.com/javase/7/docs/api/java/io/File.html" target="_top"><code class="classname">File</code></a> <code class="literal">buildStagingDirectory</code></h4></div></div></div><p>Specifies the path to your external native build output directory.

</p><p>This directory also includes other build system files that should persist when performing
clean builds, such as <a class="ulink" href="https://ninja-build.org/" target="_top">Ninja build files</a>. If you do not
specify a value for this property, the Android plugin uses the <code class="literal">
&lt;project_dir&gt;/&lt;module&gt;/.externalNativeBuild/</code> directory by default.

</p><p>If you specify a path that does not exist, the Android plugin creates it for you. Relative
paths are relative to the <code class="literal">build.gradle</code> file, as shown below:

</p><pre class="programlisting">android {
    ...
    externalNativeBuild {
        cmake {
            ...
            <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// Tells Gradle to put outputs from external native</span>
            <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// builds in the path specified below.</span>
            buildStagingDirectory <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"./outputs/cmake"</span>
        }
    }
}</pre><p>If you specify a path that's a subdirectory of your project's temporary <code class="literal">build/
</code> directory, you get a build error. That's because files in this directory do not
persist through clean builds. So, you should either keep using the default <code class="literal">
&lt;project_dir&gt;/&lt;module&gt;/.externalNativeBuild/</code> directory or specify a path
outside the temporary build directory.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="signature"><a name="com.android.build.gradle.internal.dsl.CmakeOptions:path"></a><a class="ulink" href="http://download.oracle.com/javase/7/docs/api/java/io/File.html" target="_top"><code class="classname">File</code></a> <code class="literal">path</code></h4></div></div></div><p>Specifies the relative path to your <code class="literal">CMakeLists.txt</code> build script.

</p><p>For example, if your CMake build script is in the same folder as your module-level <code class="literal">
build.gradle</code> file, you simply pass the following:

</p><pre class="programlisting">android {
    ...
    externalNativeBuild {
        cmake {
            ...
            <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// Tells Gradle to find the root CMake build script in the same</span>
            <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// directory as the module's build.gradle file. Gradle requires this</span>
            <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// build script to add your CMake project as a build dependency and</span>
            <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// pull your native sources into your Android project.</span>
            path <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"CMakeLists.txt"</span>
        }
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="signature"><a name="com.android.build.gradle.internal.dsl.CmakeOptions:version"></a><a class="ulink" href="http://download.oracle.com/javase/7/docs/api/java/lang/String.html" target="_top"><code class="classname">String</code></a> <code class="literal">version</code></h4></div></div></div><p>The version of CMake that the Android plugin should use when building your CMake project.

</p><p>When you specify a version of CMake, as shown below, the plugin searches for the
appropriate CMake binary within your PATH environmental variable. So, make sure you add the
path to the target CMake binary to your PATH environmental variable.

</p><pre class="programlisting">android {
    ...
    externalNativeBuild {
        cmake {
            ...
            <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// Specifies the version of CMake the Android plugin should use. You need to</span>
            <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// include the path to the CMake binary of this version to your PATH</span>
            <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// environmental variable.</span>
            version <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"3.7.1"</span>
        }
    }
}</pre><p>If you do not configure this property, the plugin uses the version of CMake available from
the <a class="ulink" href="https://developer.android.com/studio/intro/update.html#sdk-manager" target="_top">SDK
manager</a>. (Android Studio prompts you to download this version of CMake if you haven't
already done so).

</p><p>Alternatively, you can specify a version of CMake in your project's <code class="literal">local.properties
</code> file, as shown below:

</p><pre class="programlisting"><span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// The path may be either absolute or relative to the the local.properties file</span>
<span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// you are editing.</span>
cmake.dir=<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"&lt;path-to-cmake&gt;"</span></pre></div></div></div><div id="copyright">
                       Except as noted, this content is licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a>.
                       For details and restrictions, see the <a href="http://developer.android.com/license.html">Content License</a>.
                   </div></div></body></html>